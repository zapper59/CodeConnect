apply plugin: "maven"
apply plugin: "war"
apply plugin: "eclipse"
apply plugin: "eclipse-wtp"

version = "1.0.2"

war {
	archiveName = "codeconnect.war"
	destinationDir = buildDir

	manifest {
		attributes(
			"Implementation-Vendor":"Cisco Systems, Inc",
			"Implementation-Title":rootProject.name,
			"Implementation-Version":rootProject.version
		)
	}
}

dependencies {
	providedRuntime "javax.servlet:javax.servlet-api:3.1.0"
}

tasks.withType(JavaCompile) {
	options.compilerArgs << "-Xlint:unchecked"
	options.compilerArgs << "-Werror"
}

eclipse {
	wtp {
		component {
			contextPath = "codeconnect"
			deployName = "codeconnect"

			//By default gradle excludes provided dependencies with the default value for minusConfigurations,
			//We want these dependencies to appear in our eclipse project since we dont run eclipse from within the local container's environment
			plusConfigurations += [configurations.providedRuntime]
			plusConfigurations += [configurations.providedCompile]
			minusConfigurations = null
		}
		//The default facet configuration generated by the eclipse-wtp plugin defaults to outdated values
		//This causes unusual phony errors to be reported by eclipse when using jdk 1.7 features, let"s bring them up to date
		facet {
			facet name: "jst.web", version: "3.1"
			facet name: "java", version: "1.7"
			facet name: "wst.jsdt.web", version: "1.0"
		}
	}
}
